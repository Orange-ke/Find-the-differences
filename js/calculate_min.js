$(function(){$("document").ready(function(){function C(){var b=p;a=0;$(".eye_test_intro > p").html(b[a].describe).append(b[a].photo);$(".popphoto").attr("src",b[a].big_photo)}function D(){11>n&&setTimeout(function(){$(".choice").prop("disabled",!1)},2E3)}function E(){11>n&&setTimeout(function(){$(".choice").prop("disabled",!1)},200)}function F(){$("#play_bt").click(function(){$("#spinner").addClass("spinning");$("#bar").addClass("rotate_bar");$(".choice").prop("disabled",!0);document.getElementById("song").oncanplaythrough=
document.getElementById("song").play();$("#play_bt").fadeOut(500);$("#play_bt").removeClass("play_bt_anim");document.getElementById("song").addEventListener("ended",function(){E();m+=1;console.log(m);$("#spinner").removeClass("spinning");$("#bar").removeClass("rotate_bar");2>m&&($("#play_bt").fadeIn(500),$("#play_bt").addClass("play_bt_anim"))})})}function G(){function c(){h--;d.innerHTML=h;0===h&&(clearInterval(q),document.getElementById("inputMin").style.display="none",$("#overLay").remove(),$("#popupParis").hide(5),
$("#shut").hide(5),$("#slide_down").css("display","block"),$(".slide").addClass("slideDown"),$(".hint_2").css("display","block").addClass("hint_2_anim"))}var e=document.getElementById("start_bnt");d=document.createElement("span");document.body.appendChild(d);d.setAttribute("id","inputMin");d.style.width="10px";d.style.height="10px";d.style.position="absolute";d.style.top="15px";d.style.left="6%";d.style.fontSize="20px";d.style.fontWeight="bolder";d.style.color="#FE9F00";d.style.zIndex=1E3;e.onclick=
function(){h=w;d.innerHTML=h;w-=5;q=setInterval(c,1E3);document.getElementById("cover").setAttribute("class","fadeOutLeft animatedFast");document.getElementById("inputMin").style.display="inline";5>a&&D();4<a&&(clearInterval(q),document.getElementById("test_song").pause(),document.getElementById("test_song").remove(),$("#inputMin").css("display","none"),$(".music_spinner").css("display","block"),$(".eye_test_intro > p").html(b[a].describe).append(b[a].music),F())}}function x(){$("#cover").addClass("fadeInRight animated");
5===a&&($("#hint").css("top","10%"),$("#hint").html("<b id='title2'>\u7b2c\u4e8c\u5173</b><br><p>\u8bf7\u533a\u522b\u8c01\u662f\u539f\u5531\uff0c\u97f3\u4e50\u53ea\u80fd\u64ad\u653e\u4e24\u6b21\uff0c\u4e2d\u9014\u4e0d\u53ef\u505c\u6b62\u64ad\u653e\uff01</p><br id='line_m'><p>\u5728\u5f00\u59cb\u524d\u5efa\u8bae\u8bd5\u8bd5\u97f3\u91cf</p>"),$("#start_2").css("display","inline"),$("#start_bnt").html("\u5f00\u59cb\u4e0b\u4e00\u5173"),$(".eye_test_intro > p").html(b[a].describe).append(b[a].music),b[a].hasOwnProperty("C")?
$("#choiceC").css("display","inline"):$("#choiceC").css("display","none"),b[a].hasOwnProperty("D")?$("#choiceD").css("display","inline"):$("#choiceD").css("display","none"),$("#choiceA").html(b[a].A.describe),$("#choiceB").html(b[a].B.describe),b[a].hasOwnProperty("C")&&$("#choiceC").html(b[a].C.describe),b[a].hasOwnProperty("D")&&$("#choiceD").html(b[a].D.describe),$(".test_content_1").removeClass("fadeOutLeft animatedFast").addClass("fadeInRight animated"))}function y(){var a=document.createElement("div");
document.body.appendChild(a);a.id="overLay";a.style.position="absolute";a.style.width=window.innerWidth+"px";a.style.height="687px";a.style.top="0px";a.style.left=window.pageXOffset+"px";a.style.zIndex=990;a.style.opacity=.9;a.style.backgroundColor="#000"}function z(){$(".photos").click(function(){y();$("#shut").show(200);$("#popupParis").show(200);$("#overLay").click(function(){$(this).remove();$("#popupParis").hide(200);$("#shut").hide(200)})});$("#shut").click(function(){$("#overLay").remove();
$(this).hide(200);$("#popupParis").hide(200)})}$("body").bind("touchstart",function(){FastClick.attach(document.body)});$("#play_bt").bind("tap",function(){FastClick.attach(document.body)});var b,a,r,k=0,c=0,n=1,p=[],m=0,t=0,u=0,l,A,B,w=70,d,h,q,H=$("<a id='wrap' href='#title_'></a>");$("#start_").wrap(H);$("#wrap").css({textDecoration:"none",color:"#202020"});$("#start_").click(function(){$("#cover").css("display","block").addClass("fadeInRight animated");$("#hint").text("\u8bf7\u5728\u5c4f\u5e55\u5de6\u4e0a\u89d2\u663e\u793a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u9009\u62e9\uff0c\u572820\u79d2\u5185\u9009\u62e9\u6b63\u786e\uff0c\u6709\u989d\u5916\u5956\u52b1\uff01");
$(".header_title").hide(200);$(".begin_intro").hide(200);setTimeout(function(){$(".test_content_1").show(500);$(".progress").show(500)},300);C();z();G()});document.getElementById("test").addEventListener("click",function(){document.getElementById("test_song").oncanplaythrough=document.getElementById("test_song").play()});$(".choice").click(function(){if(5>a){clearInterval(q);$("#inputMin").css("display","none");$("#slide_down").fadeOut(200);b=p;var v=$(this).attr("data-choice");n+=1;k+=10;l=b[a];
r=l[v].bonus||0;c+=r;A=l[v].eye_score||0;t+=A;c=20>=w-d.innerHTML&&l[v].hasOwnProperty("bonus")?c+5:c+0;console.log(c);$(".progress > div").css("width",k+"%");$(".progress > div").text(k+"%");$(".progress > div").prop("aria-valuenow",k);$(".test_content_1").hasClass("fadeInRight animated")&&$(".test_content_1").removeClass("fadeInRight animated");$(".test_content_1").addClass("fadeOutLeft animatedFast");$(".choice").prop("disabled",!0);setTimeout(function(){a+=1;console.log(a);if(5===a)return x(),
a;$(".eye_test_intro > p").html(b[a].describe).append(b[a].photo);$(".popphoto").attr("src",b[a].big_photo);z();x();$("#hint").text("\u60a8\u7684\u53ef\u7528\u65f6\u95f4\u7f29\u77ed\u4e86\uff01");$("#start_bnt").text("\u5f00\u59cb\u4e0b\u4e00\u9898");b[a].hasOwnProperty("C")?$("#choiceC").css("display","inline"):$("#choiceC").css("display","none");b[a].hasOwnProperty("D")?$("#choiceD").css("display","inline"):$("#choiceD").css("display","none");$("#choiceA").html(b[a].A.describe);$("#choiceB").html(b[a].B.describe);
b[a].hasOwnProperty("C")&&$("#choiceC").html(b[a].C.describe);b[a].hasOwnProperty("D")&&$("#choiceD").html(b[a].D.describe);$(".test_content_1").removeClass("fadeOutLeft animatedFast").addClass("fadeInRight animated")},200)}});$(".choice").click(function(){if(4<a&&10>a){b=p;var d=$(this).attr("data-choice");n+=1;k+=10;l=b[a];r=l[d].bonus||0;c+=r;B=l[d].ear_score||0;u+=B;c=1===m&&l[d].hasOwnProperty("bonus")?c+5:c+0;console.log(c);$("#spinner").removeClass("spinning");$("#bar").removeClass("rotate_bar");
$("#song").remove();$(".progress > div").css("width",k+"%");$(".progress > div").text(k+"%");$(".progress > div").prop("aria-valuenow",k);$(".test_content_1").hasClass("fadeInRight animated")&&$(".test_content_1").removeClass("fadeInRight animated");$(".test_content_1").addClass("fadeOutLeft animatedFast");$("#play_bt").fadeIn(200);$("#play_bt").addClass("play_bt_anim");$(".choice").prop("disabled",!0);setTimeout(function(){m=0;console.log(m)},100);setTimeout(function(){a+=1;console.log(a);9<a||($(".eye_test_intro > p").html(b[a].describe).append(b[a].music),
b[a].hasOwnProperty("C")?$("#choiceC").css("display","inline"):$("#choiceC").css("display","none"),b[a].hasOwnProperty("D")?$("#choiceD").css("display","inline"):$("#choiceD").css("display","none"),$("#choiceA").html(b[a].A.describe),$("#choiceB").html(b[a].B.describe),b[a].hasOwnProperty("C")&&$("#choiceC").html(b[a].C.describe),b[a].hasOwnProperty("D")&&$("#choiceD").html(b[a].D.describe),$(".test_content_1").removeClass("fadeOutLeft animatedFast").addClass("fadeInRight animated"))},200)}if(10<
n){$("a").attr("href","#title_");$(".test_content_1").css("display","none").addClass("fadeOutLeft animatedFast");$(".progress").hide(200);$(".header_title").show(200);$(".result").show(200);var d="",e,h,f,g;140<=c?(e=99,d="\u725b\u903c\u54c4\u54c4\uff01",g="\u60a8\u5df2\u7ecf\u6ca1\u6709\u5bf9\u624b\u4e86",f="\uff0c\u8bf7\u6536\u4e0b\u6211\u7684\u819d\u76d6\u3002"):120<=c&&140>c?(e=Math.floor(10*Math.random())+89,g="\u9ad8\uff01\u5b9e\u5728\u662f\u9ad8",f="\uff0c\u8fd9\u4f4d\u7ae5\u978b\u662f\u98de\u884c\u5458\u7684\u4f53\u683c\uff01"):
100<=c&&120>c?(e=Math.floor(10*Math.random())+79,g="\u54ce\u5466\uff01",f="\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u62ff\u4e86\u4e2a\u7b2c\u4e8c\u540d\uff01"):80<=c&&100>c?(e=Math.floor(15*Math.random())+64,g="\u6d6a\u91cc\u4e2a\u6d6a",f="\uff0c\u8bf7\u53eb\u6211\u5dee\u4e0d\u591a\u5148\u751f\uff01"):60<=c&&80>c?(e=Math.floor(15*Math.random())+49,g="No! no! no!",f="\uff0c\u5c0f\u4f19\u5b50\u9700\u8981\u591a\u7ec3\u4e60\u5466\uff01"):40<=c&&60>c?(e=Math.floor(15*Math.random())+34,g="\u5f88\u7a33\u5b9a",f="\uff0c\u53c8\u662f\u5012\u6570\u7b2c\u4e8c..."):
20<=c&&40>c?(e=Math.floor(15*Math.random())+19,g="\u54c7\u585e",f="\uff0c\u53c8\u57ab\u5e95\u4e86!"):0===c?(e=0,g="what\uff01",f="\uff0c\u8fd9\u667a\u5546\u6ca1\u8c01\u4e86!"):(e=Math.floor(15*Math.random())+4,g="\u54e6\u4e70\u5676",f="\uff0c\u8be5\u5403\u5403\u8111\u767d\u91d1\u4e86!");h=c;$(".perct").show(2500);$(".perctenge").text(e+"%");$(".final_score").text(h).prop("counter",0).animate({counter:$(".final_score").text()},{duration:2E3,easing:"swing",step:function(a){$(this).text(Math.ceil(a))}});
document.title=d+"\u6211\u7684\u5f97\u5206 "+h+" "+g+f;5===t?$(".eye_3").addClass("highlighted"):5>t&&3<=t?$(".eye_2").addClass("highlighted"):$(".eye_1").addClass("highlighted");5==u?$(".ear_3").addClass("highlighted"):5>u&&3<=u?$(".ear_2").addClass("highlighted"):$(".ear_1").addClass("highlighted")}});$.getJSON("data/data.json",function(a){$.extend(p,a)});$("#follow").click(function(){y();$("#QR").show(200);$("#overLay").click(function(){$(this).remove();$("#QR").hide(200)})});$(".arrow1").click(function(){$(".blink_").toggleClass("blink_anim");
$(".con_blink").toggleClass("con_blink_anim");$(".arrow1").toggleClass("arrow_anim")});$(".arrow2").click(function(){$(".ear_").toggleClass("ear_anim");$(".hover__").toggleClass("hover__anim");$(".arrow2").toggleClass("arrow_anim")});setInterval(function(){$("#play_bt").toggleClass("play_bt_anim")},1E3);setInterval(function(){$("#start_").toggleClass("start_anim")},3E3)})});